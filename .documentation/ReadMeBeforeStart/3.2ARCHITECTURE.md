# EcoSphere System Architecture Documentation

**Project**: EcoSphere - Smart Building Analytics System  
**Last Updated**: 2025-11-28  
**Version**: 1.0  
**Status**: ‚úÖ P0 Completed | üîÑ P1 In Progress

---

## üìã Table of Contents

1. [Architecture Overview](#1-architecture-overview)
2. [Technology Stack](#2-technology-stack)
3. [Project Structure](#3-project-structure)
4. [Class Design and Implementation](#4-class-design-and-implementation)
5. [API Architecture](#5-api-architecture)
6. [Component Architecture](#6-component-architecture)
7. [Frontend-Backend Relationship](#7-frontend-backend-relationship)
8. [Design Philosophy](#8-design-philosophy)
9. [Implementation Progress](#9-implementation-progress)

---

## 1. Architecture Overview

### 1.1 System Architecture

EcoSphere adopts a **three-tier architecture** design:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Presentation Layer (Frontend)             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ  UI Components‚îÇ  ‚îÇ  Service Layer‚îÇ  ‚îÇ  Context API ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  (React)     ‚îÇ  ‚îÇ  (API Calls)  ‚îÇ  ‚îÇ  (State Mgmt)‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚Üì HTTP/JSON ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   Application Layer (Backend)                ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ   Routes     ‚îÇ‚Üí ‚îÇ Controllers  ‚îÇ‚Üí ‚îÇ  Services    ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  (API Endpoints)‚îÇ ‚îÇ(Request Handler)‚îÇ(Business Logic)‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚Üì Data Operations ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      Data Layer (Data)                       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ  Mock Data   ‚îÇ  ‚îÇ  External API‚îÇ  ‚îÇ  Future: SQL ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  (JSON Files)‚îÇ  ‚îÇ(Electricity  ‚îÇ  ‚îÇ   Server     ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ    Maps)     ‚îÇ  ‚îÇ              ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 1.2 Core Modules

| Module | Status | Description |
|--------|--------|-------------|
| Login Module | ‚úÖ Complete | User authentication and session management |
| User Management Module | ‚úÖ Complete | Admin manages users and permissions |
| Carbon Footprint Tracking Module | ‚úÖ Complete | Two calculation modes + visualization |
| Electricity Dashboard Module | ‚è≥ Pending | Electricity data display |

### 1.3 Data Flow

```
User Action ‚Üí UI Component ‚Üí Service Layer ‚Üí HTTP Request ‚Üí Backend API
                                              ‚Üì
                                          Controller
                                              ‚Üì
                                          Service
                                              ‚Üì
                                          Data Source
                                              ‚Üì
                                          JSON Response
                                              ‚Üì
Frontend Display ‚Üê UI Component ‚Üê Service Layer ‚Üê HTTP Response ‚Üê Backend API
```

---

## 2. Technology Stack

### 2.1 Frontend Technology Stack ‚úÖ

| Technology | Version | Purpose | Reason for Choice |
|------------|---------|---------|-------------------|
| **Vite** | Latest | Build Tool | Fast startup, fast hot reload |
| **React** | 18.x | UI Framework | Component-based, mature ecosystem |
| **Material-UI** | 5.x | UI Component Library | Professional, rich components |
| **Chart.js** | 4.x | Chart Library | Free, locally generated |
| **React Router** | 6.x | Routing | Standard routing solution |
| **Context API** | React Built-in | State Management | Lightweight, suitable for project scale |

**Why These Technologies**:
- **Vite**: Faster than Create React App, better development experience
- **Material-UI**: Provides professional UI components, meets SAIT design standards
- **Chart.js**: Free, no external API needed, powerful features
- **Context API**: Project scale is moderate, doesn't need Redux complexity



### 2.2 Backend Technology Stack ‚úÖ

| Technology | Version | Purpose | Reason for Choice |
|------------|---------|---------|-------------------|
| **Node.js** | 18.x+ | Runtime Environment | JavaScript full-stack |
| **Express.js** | 4.x | Web Framework | Simple, flexible |
| **RESTful API** | - | API Design | Standard, easy to understand |

**Architecture Pattern**: Routes ‚Üí Controllers ‚Üí Services ‚Üí Utils

### 2.3 Data Storage (Prototype Phase) ‚ö†Ô∏è

| Solution | Status | Description |
|----------|--------|-------------|
| **Mock Data** | ‚úÖ Currently Used | JSON file storage |
| **SQL Server** | üîÑ Future Migration | Week 1-2 planned |

**Mock Data Files**:
- `mock-data/users.json` - User data
- `mock-data/electricity.json` - Electricity data (3 months, hourly)
- `mock-data/carbonFootprint.json` - Carbon footprint historical data

**Why Use Mock Data**:
- Client data table structure not finalized
- Rapid development in Prototype phase
- Easy to demo and test

### 2.4 External API ‚úÖ

| API | Purpose | Status |
|-----|---------|--------|
| **Electricity Maps API** | Get real-time carbon intensity (Alberta, Calgary) | ‚úÖ Integrated |

---

## 3. Project Structure

### 3.1 Frontend Structure

```
ecosphere-frontend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ assets/                 # Static resources
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ loginbackground.jpg
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sait-logo_vert.svg
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sait-logo_horz.svg
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ components/             # React components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Common/             # Common components
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AlertMessage.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ErrorBoundary.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ LoadingSpinner.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Layout/             # Layout components
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Sidebar.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AIChatbot.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserManagement/     # User management components
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserTable.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserTableRow.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserDialog.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UserForm.jsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CarbonFootprint/    # Carbon footprint components
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ CustomCalculator.jsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ pages/                  # Page components (containers)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LoginPage.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DashboardPage.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserManagementPage.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CarbonFootprintPage.jsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ComingSoonPage.jsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ contexts/               # React Context
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AuthContext.jsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ hooks/                  # Custom Hooks
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useAuth.js
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ services/               # API services
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserService.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ElectricityService.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ElectricityMapsService.js
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ models/                 # Data models (utility classes)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ User.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Admin.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TeamMember.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AccessControl.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CarbonFootprint.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BillEntry.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Report.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ElectricityReport.js
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ App.jsx                 # Main application component
‚îÇ   ‚îú‚îÄ‚îÄ main.jsx                # Entry file
‚îÇ   ‚îî‚îÄ‚îÄ index.css               # Global styles
‚îÇ
‚îú‚îÄ‚îÄ .env                        # Environment variables
‚îú‚îÄ‚îÄ package.json                # Dependencies
‚îî‚îÄ‚îÄ vite.config.js              # Vite configuration
```

### 3.2 Backend Structure

```
ecosphere-backend/
‚îú‚îÄ‚îÄ config/                     # Configuration files
‚îÇ   ‚îî‚îÄ‚îÄ config.js
‚îÇ
‚îú‚îÄ‚îÄ routes/                     # API routes
‚îÇ   ‚îú‚îÄ‚îÄ userRoutes.js
‚îÇ   ‚îî‚îÄ‚îÄ electricityRoutes.js
‚îÇ
‚îú‚îÄ‚îÄ controllers/                # Controllers
‚îÇ   ‚îú‚îÄ‚îÄ userController.js
‚îÇ   ‚îî‚îÄ‚îÄ electricityController.js
‚îÇ
‚îú‚îÄ‚îÄ services/                   # Business logic
‚îÇ   ‚îú‚îÄ‚îÄ userService.js
‚îÇ   ‚îî‚îÄ‚îÄ electricityService.js
‚îÇ
‚îú‚îÄ‚îÄ models/                     # Data models (complete classes)
‚îÇ   ‚îú‚îÄ‚îÄ User.js
‚îÇ   ‚îú‚îÄ‚îÄ Admin.js
‚îÇ   ‚îú‚îÄ‚îÄ TeamMember.js
‚îÇ   ‚îú‚îÄ‚îÄ AccessControl.js
‚îÇ   ‚îú‚îÄ‚îÄ CarbonFootprint.js
‚îÇ   ‚îú‚îÄ‚îÄ BillEntry.js
‚îÇ   ‚îú‚îÄ‚îÄ Report.js
‚îÇ   ‚îî‚îÄ‚îÄ ElectricityReport.js
‚îÇ
‚îú‚îÄ‚îÄ utils/                      # Utility functions
‚îÇ   ‚îî‚îÄ‚îÄ fileHelper.js
‚îÇ
‚îú‚îÄ‚îÄ server.js                   # Server entry point
‚îú‚îÄ‚îÄ .env                        # Environment variables
‚îî‚îÄ‚îÄ package.json                # Dependencies
```

### 3.3 Why This Organization

**Frontend Organization Principles**:
1. **Group by Feature**: components/ organized by functional modules
2. **Separation of Concerns**: pages/ (containers) vs components/ (presentation)
3. **Independent Service Layer**: services/ encapsulates all API calls
4. **Lightweight Model Layer**: models/ only contains utility classes

**Backend Organization Principles**:
1. **Layered Architecture**: Routes ‚Üí Controllers ‚Üí Services ‚Üí Models
2. **Single Responsibility**: Each layer only responsible for its own tasks
3. **Easy to Test**: Each layer can be tested independently
4. **Easy to Extend**: Adding new features only requires adding new files

---

## 4. Class Design and Implementation

### 4.1 Class Diagram Compliance Principles

All class designs strictly follow the definitions in `class-diagram-optimized.puml`.

**Design Principles**:
- ‚úÖ All classes must include all attributes defined in the class diagram
- ‚úÖ All methods must be implemented according to signatures in the class diagram
- ‚úÖ Relationships between classes must be reflected in code
- ‚úÖ Naming must be consistent with the class diagram

### 4.2 Implemented Classes (P0 - 100% Complete)

#### 4.2.1 User Class (Abstract Class) ‚úÖ

**Package**: User Management  
**Frontend Location**: `ecosphere-frontend/src/models/User.js`  
**Backend Location**: `ecosphere-backend/models/User.js`

**Attributes**:
```javascript
- id: int
- firstName: String
- lastName: String
- email: String
- password: String
- role: String
```

**Methods**:
```javascript
+ createUser(id, firstName, lastName, email, password, role): void
+ login(): void
+ logout(): void
```

**Relationships**:
- Inherited by: `Admin --|> User`, `TeamMember --|> User`

---

#### 4.2.2 Admin Class (Inherits User) ‚úÖ

**Package**: User Management  
**Frontend Location**: `ecosphere-frontend/src/models/Admin.js`  
**Backend Location**: `ecosphere-backend/models/Admin.js`

**Additional Methods**:
```javascript
+ addUser(userData): void
+ editUserPermissions(userId, permissions): void
+ assignRole(userId, role): void
+ createQuiz(): void
+ editQuiz(quizId): void
+ deleteQuiz(quizId): void
```

**Relationships**:
- Inheritance: `Admin --|> User`
- Dependency: `Admin ..> AccessControl : uses`

---

#### 4.2.3 TeamMember Class (Inherits User) ‚úÖ

**Package**: User Management  
**Frontend Location**: `ecosphere-frontend/src/models/TeamMember.js`  
**Backend Location**: `ecosphere-backend/models/TeamMember.js`

**Additional Attributes**:
```javascript
- promptChat: int
- permissions: List<String>
```

**Additional Methods**:
```javascript
+ getPermissions(): List<String>
```

**Relationships**:
- Inheritance: `TeamMember --|> User`

---

#### 4.2.4 AccessControl Class ‚úÖ

**Package**: Security  
**Frontend Location**: `ecosphere-frontend/src/models/AccessControl.js`  
**Backend Location**: `ecosphere-backend/models/AccessControl.js`

**Methods** (Static):
```javascript
+ checkPermission(user, module): boolean
+ updateUserPermissions(userId, permissions): void
```

**Relationships**:
- Used by: `Admin ..> AccessControl : uses`
- Depended on: `UI ..> AccessControl : checks permission`

---

#### 4.2.5 CarbonFootprint Functionality ‚úÖ

**Implementation Method**: Implemented through Service layer (fully functional)

**Related Files**:
- `ElectricityMapsService.js` - Carbon intensity API and calculation
- `ElectricityService.js` - Electricity data management
- `CarbonFootprintPage.jsx` - Main page container
- `CustomCalculator.jsx` - User temporary calculation component

**Corresponding Class Diagram Methods**:
```javascript
+ calculateFootprint(electricityUsage, emissionFactor): double
+ addBillEntry(year, month, electricityUsage): void
+ overrideWithDIY(): DataSet
```

---

#### 4.2.6 BillEntry Functionality ‚úÖ

**Implementation Method**: As React state in CustomCalculator component

**Data Structure**:
```javascript
{
  id: int,
  year: string,
  month: string,
  usage: number
}
```

---

### 4.3 Classes to be Implemented (P1 - Pending)

#### 4.3.1 Report Class (Abstract Class) ‚è≥

**Package**: Reporting System  
**Planned Location**: `ecosphere-frontend/src/models/Report.js`

**Attributes**:
```javascript
- id: int
- reportType: String
```

**Methods**:
```javascript
+ exportReport(): void
+ filterReport(filters): void
```

---

#### 4.3.2 ElectricityReport Class (Inherits Report) ‚è≥

**Package**: Reporting System  
**Planned Location**: `ecosphere-frontend/src/models/ElectricityReport.js`

**Additional Attributes**:
```javascript
- electricityConsumption: double
- electricityGeneration: double
```

**Methods**:
```javascript
+ calculateCarbonFootprint(emissionFactor): double
+ generateHotspotMap(data): Map
+ generateCarbonVsConsumptionChart(): Chart
```

---

#### 4.3.3 Dashboard Class ‚è≥

**Package**: User Interface  
**Planned Location**: `ecosphere-frontend/src/models/Dashboard.js`

**Attributes**:
```javascript
- id: int
- dashboardType: String
```

**Methods**:
```javascript
+ generateView(user, type): DashboardView
+ filterByPermissions(user): List
```

---

#### 4.3.4 Visualizer Class ‚è≥

**Package**: Visualization  
**Planned Location**: `ecosphere-frontend/src/models/Visualizer.js`

**Attributes**:
```javascript
- id: int
- visualizeType: String
```

**Methods**:
```javascript
+ generateGraph(data, graphType): void
+ calculateSelfSufficiency(generation, consumption): double
+ renderHotspotMap(data): Map
```

---

### 4.4 Relationships Between Classes

#### Inheritance Relationships
```
User (abstract)
  ‚îú‚îÄ‚îÄ Admin ‚úÖ
  ‚îî‚îÄ‚îÄ TeamMember ‚úÖ

Report (abstract) ‚è≥
  ‚îú‚îÄ‚îÄ WaterReport ‚è∏Ô∏è
  ‚îú‚îÄ‚îÄ ElectricityReport ‚è≥
  ‚îî‚îÄ‚îÄ ThermalReport ‚è∏Ô∏è
```

#### Composition Relationships
```
UI *-- Dashboard (multiple) ‚è≥
UI *-- Filter (1) ‚è∏Ô∏è
UI *-- ReportCustomization (1) ‚è∏Ô∏è
UI *-- CarbonFootprint (1) ‚úÖ
CarbonFootprint o-- BillEntry (multiple) ‚úÖ
```

#### Dependency Relationships
```
Admin ..> AccessControl ‚úÖ
UI ..> AccessControl ‚úÖ
Dashboard ..> AccessControl ‚è≥
Report ..> AccessControl ‚è≥
```

---

### 4.5 Implementation Progress Statistics

| Priority | Total | Completed | Pending | Completion Rate |
|----------|-------|-----------|---------|-----------------|
| P0 | 6 | 6 | 0 | **100%** ‚úÖ |
| P1 | 5 | 0 | 5 | 0% |
| P2 | 7 | 0 | 7 | 0% |
| **Total** | **18** | **6** | **12** | **33%** |

---

